{% extends 'data/base.html' %}
{% block title %} Data {% endblock %}
{% block body %}
<center>
<div class="alert alert-primary" role="alert">
Atualmente, constam {{numReadings}} leituras de sensores
</div>
<div class="row">
<div class="col-md">
  <div class="container-fluid">
  {% for entry in info %}
    <div class="card w-25">
    <div class="card-header">
      {{entry.0}}
    </div>
    <div class="card-body">
      <h5 class="card-title">Total de leituras: {{entry.1}}</h5>
      <p class="card-text">Ãšltima leitura foi de {{entry.2.sensorKind}} no valor de {{entry.2.value}}</p>
      <!--<a href="#" class="btn btn-primary">Go somewhere</a>-->
    </div>
    <div class="card-footer text-muted">
      {{entry.2.moment}}
    </div>
  </div>
  {% endfor %}
</div>
</div>

<div class="col-sm">

  <div id="piechart"></div>
  <script type="text/javascript">
   var a =[];
  </script>
  {% for entry in pieData %}
  <script type="text/javascript">
  //console.log(a)
  var x = "{{entry.0|safe}}";
  var b =[];
  b.push(x);
  try
  {
    var x = {{entry.1|safe}};
  }catch(err)
  {
    var x = "{{entry.1|safe}}";
  }
  b.push(x);
  a.push(b);
  </script>
  {% endfor %}

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <script type="text/javascript">
  // Load google charts
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  // Draw the chart and set the chart values
  function drawChart() {
    var data = google.visualization.arrayToDataTable(a);

    // Optional; add a title and set the width and height of the chart
    var options = {'title':'Leituras por Sensor', 'width':550, 'height':400};

    // Display the chart inside the <div> element with id="piechart"
    var chart = new google.visualization.PieChart(document.getElementById('piechart'));
    chart.draw(data, options);
  }
  </script>
</div>


</div>



</center>
{% endblock %}
